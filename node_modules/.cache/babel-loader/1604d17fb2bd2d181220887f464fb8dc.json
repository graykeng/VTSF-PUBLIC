{"ast":null,"code":"import _slicedToArray from \"/Users/graykeng/Documents/Coding/webDev/vtsfw/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _this = this,\n  _jsxFileName = \"/Users/graykeng/Documents/Coding/webDev/vtsfw/src/pages/Redeem.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { Helmet } from 'react-helmet';\nimport { getTicketStatus, updateRedeem } from '../ApiCaller';\nimport './style/Redeem.css';\nvar Redeem = function Redeem() {\n  var _useParams = useParams(),\n    uuid = _useParams.uuid;\n  var _useState = useState([]),\n    _useState2 = _slicedToArray(_useState, 2),\n    Status = _useState2[0],\n    setStatus = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(false),\n    _useState6 = _slicedToArray(_useState5, 2),\n    showError = _useState6[0],\n    setShowError = _useState6[1];\n  var page;\n  useEffect(function () {\n    getTicketStatus(uuid).then(function (data) {\n      return setStatus(data);\n    });\n  }, []);\n  var handleOnChange = function handleOnChange(e) {\n    setPassword(e.target.value);\n    setShowError(false);\n  };\n  var handleRedeem = function handleRedeem(e) {\n    e.preventDefault();\n    if (password.trim() !== '7') {\n      setShowError(true);\n    } else {\n      updateRedeem(uuid);\n      setTimeout(function () {\n        window.location.reload();\n      }, 1000);\n    }\n  };\n  var TicketRedeemedPre = Status.map(function (obj) {\n    return obj.TicketRedeemed;\n  });\n  var TicketRedeemed = TicketRedeemedPre[0];\n  var FirstNamePre = Status.map(function (obj) {\n    return obj.FirstName;\n  });\n  var FirstName = FirstNamePre[0];\n  var SerialNumPre = Status.map(function (obj) {\n    return obj.id;\n  });\n  var SerialNum = SerialNumPre[0];\n  var LastNamePre = Status.map(function (obj) {\n    return obj.LastName;\n  });\n  var LastName = LastNamePre[0];\n  switch (TicketRedeemed) {\n    case 0:\n      page = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"RedeemPage\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Helmet, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"title\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 25\n        }\n      }, \"Redeem | \", FirstName)), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"RedeemSection\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"RedeemH1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 25\n        }\n      }, \"Welcome, \", FirstName, \" \", LastName, \"!\"), /*#__PURE__*/React.createElement(\"form\", {\n        onSubmit: handleRedeem,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        placeholder: \"Redeem Password\",\n        className: \"RedeemPasswordInput\",\n        onChange: handleOnChange,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 29\n        }\n      }), showError && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"WarningMessage\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 43\n        }\n      }, \"Only STAFF can redeem!\"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"RedeemBt\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 29\n        }\n      }, \"Redeem\")), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"WarningMessage\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 25\n        }\n      }, \"*This button can only click by a STAFF!\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"WarningMessage\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 25\n        }\n      }, \"*Once you redeem your ticket, your ticket will be invalid.\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 25\n        }\n      }), /*#__PURE__*/React.createElement(\"label\", {\n        className: \"WarningMessage\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }\n      }, \"Ticket Serial Number: \", SerialNum)));\n      break;\n    case 1:\n      page = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"RedeemPage\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Helmet, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"title\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 25\n        }\n      }, \"Redeem | Redeemed\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"RedeemSection\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"RedeemH1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 25\n        }\n      }, \"Hi, \", FirstName, \", your ticket has been redeemed. Enjoy your VTSF trip!\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick(e) {\n          window.location.href = '/';\n        },\n        className: \"RedeemBt\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 25\n        }\n      }, \"Go to Homepage\")));\n      break;\n    default:\n      page = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"RedeemPage\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(Helmet, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"title\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }\n      }, \"Redeem | Failed\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"RedeemSection\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"h1\", {\n        className: \"RedeemH1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }\n      }, \"Hi, this ticketID does not exist, please get your ticket.\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick(e) {\n          window.location.href = '/GetTicket';\n        },\n        className: \"RedeemBt\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }\n      }, \"Get Ticket\")));\n      break;\n  }\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, page);\n};\nexport default Redeem;","map":{"version":3,"names":["React","useState","useEffect","useParams","Helmet","getTicketStatus","updateRedeem","Redeem","uuid","Status","setStatus","password","setPassword","showError","setShowError","page","then","data","handleOnChange","e","target","value","handleRedeem","preventDefault","trim","setTimeout","window","location","reload","TicketRedeemedPre","map","obj","TicketRedeemed","FirstNamePre","FirstName","SerialNumPre","id","SerialNum","LastNamePre","LastName","href"],"sources":["/Users/graykeng/Documents/Coding/webDev/vtsfw/src/pages/Redeem.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { useParams } from 'react-router-dom'\nimport { Helmet } from 'react-helmet'\n\nimport { getTicketStatus, updateRedeem } from '../ApiCaller';\nimport './style/Redeem.css';\n\nconst Redeem = () => {\n    const {uuid} = useParams();\n    const [Status, setStatus] = useState([]);\n    const [password, setPassword] = useState('');\n    const [showError, setShowError] = useState(false);\n    var page;\n\n    useEffect(() => {\n        getTicketStatus(uuid).then(data => setStatus(data));\n    }, [])\n\n    const handleOnChange = (e) => {\n        setPassword(e.target.value);\n        setShowError(false);\n      }\n\n    const handleRedeem = (e) => {\n        e.preventDefault();\n        if (password.trim() !== '7') {\n            setShowError(true);\n        } else {\n            updateRedeem(uuid);\n            setTimeout(() => {\n                window.location.reload();\n            }, 1000);\n        }\n    }\n\n    const TicketRedeemedPre = Status.map(obj => obj.TicketRedeemed);\n    const TicketRedeemed = TicketRedeemedPre[0];\n\n    const FirstNamePre = Status.map(obj => obj.FirstName);\n    const FirstName = FirstNamePre[0];\n\n    const SerialNumPre = Status.map(obj => obj.id);\n    const SerialNum = SerialNumPre[0];\n\n    const LastNamePre = Status.map(obj => obj.LastName);\n    const LastName = LastNamePre[0];\n\n    switch (TicketRedeemed) {\n        case 0:\n            page = \n                <div className='RedeemPage'>\n                    <Helmet>\n                        <title>Redeem | {FirstName}</title>\n                    </Helmet>\n                    <div className='RedeemSection'>\n                        <h1 className='RedeemH1'>\n                            Welcome, {FirstName} {LastName}!\n                        </h1>\n                        <form onSubmit={handleRedeem}>\n                            <input\n                                type='text'\n                                placeholder='Redeem Password'\n                                className='RedeemPasswordInput'\n                                onChange={handleOnChange}\n                            />\n                            {showError && <p className='WarningMessage'>Only STAFF can redeem!</p>}\n                            <button type='submit' className=\"RedeemBt\">Redeem</button>\n                        </form>\n                        <label className='WarningMessage'>*This button can only click by a STAFF!</label>\n                        <br/>\n                        <label className='WarningMessage'>*Once you redeem your ticket, your ticket will be invalid.</label>\n                        <br/>\n                        <label className='WarningMessage'>Ticket Serial Number: {SerialNum}</label>\n                    </div>\n                </div>\n            break;\n        case 1:\n            page =\n                <div className='RedeemPage'>\n                    <Helmet>\n                        <title>Redeem | Redeemed</title>\n                    </Helmet>\n                    <div className='RedeemSection'>\n                        <h1 className='RedeemH1'>\n                            Hi, {FirstName}, your ticket has been redeemed. Enjoy your VTSF trip!\n                        </h1>\n                        <button onClick={(e) => {window.location.href='/';}} className=\"RedeemBt\">Go to Homepage</button>\n                    </div>\n                </div>\n            break;\n        default:\n            page =\n                <div className='RedeemPage'>\n                    <Helmet>\n                        <title>Redeem | Failed</title>\n                    </Helmet>\n                    <div className='RedeemSection'>\n                        <h1 className='RedeemH1'>\n                            Hi, this ticketID does not exist, please get your ticket.\n                        </h1>\n                        <button onClick={(e) => {window.location.href='/GetTicket';}} className=\"RedeemBt\">Get Ticket</button>\n                    </div>\n                </div>\n            break;\n    }\n\n    return (\n        <div>\n            {page}\n        </div>\n    )\n}\n\nexport default Redeem"],"mappings":"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"},"metadata":{},"sourceType":"module"}